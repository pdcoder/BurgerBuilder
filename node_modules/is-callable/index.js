'use strict';

var fnToStr = Function.prototype.toString;

<<<<<<< HEAD
var constructorRegex = /^\s*class\b/;
var isES6ClassFn = function isES6ClassFunction(value) {
	try {
		var fnStr = fnToStr.call(value);
		return constructorRegex.test(fnStr);
=======
var constructorRegex = /^\s*class /;
var isES6ClassFn = function isES6ClassFn(value) {
	try {
		var fnStr = fnToStr.call(value);
		var singleStripped = fnStr.replace(/\/\/.*\n/g, '');
		var multiStripped = singleStripped.replace(/\/\*[.\s\S]*\*\//g, '');
		var spaceStripped = multiStripped.replace(/\n/mg, ' ').replace(/ {2}/g, ' ');
		return constructorRegex.test(spaceStripped);
>>>>>>> 9d495daa1a0bedb7580a62196378715ed1a6d186
	} catch (e) {
		return false; // not a function
	}
};

<<<<<<< HEAD
var tryFunctionObject = function tryFunctionToStr(value) {
=======
var tryFunctionObject = function tryFunctionObject(value) {
>>>>>>> 9d495daa1a0bedb7580a62196378715ed1a6d186
	try {
		if (isES6ClassFn(value)) { return false; }
		fnToStr.call(value);
		return true;
	} catch (e) {
		return false;
	}
};
var toStr = Object.prototype.toString;
var fnClass = '[object Function]';
var genClass = '[object GeneratorFunction]';
var hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';

module.exports = function isCallable(value) {
	if (!value) { return false; }
	if (typeof value !== 'function' && typeof value !== 'object') { return false; }
<<<<<<< HEAD
	if (typeof value === 'function' && !value.prototype) { return true; }
=======
>>>>>>> 9d495daa1a0bedb7580a62196378715ed1a6d186
	if (hasToStringTag) { return tryFunctionObject(value); }
	if (isES6ClassFn(value)) { return false; }
	var strClass = toStr.call(value);
	return strClass === fnClass || strClass === genClass;
};
